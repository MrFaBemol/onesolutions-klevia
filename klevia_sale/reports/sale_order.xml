<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <template id="report_saleorder_document" inherit_id="sale.report_saleorder_document" >

            <xpath expr="//div[hasclass('page')]" position="after">
                <div class="page" t-if="doc.include_sow and doc.statement_of_work" style="page-break-before: always;">
                    <div class="oe_structure"/>

                    <div>
                        <h2>Statement of Work</h2>
                    </div>
                    <div t-field="doc.statement_of_work"/>
                </div>
            </xpath>

<!--            Replace "Salesperson" label-->
            <xpath expr="//div[@t-if='doc.user_id.name']//strong" position="replace">
                <strong>Contact</strong>
            </xpath>

<!--            Full column for UOM
                IMPORTANT : we add +1 to the colspan of section/subsection at the end
-->
            <xpath expr="//td[@name='td_product_quantity']/span[@t-field='line.product_uom_id']" position="replace" />
            <xpath expr="//td[@name='td_product_quantity']/span[@t-if='line.product_uom_id != line.product_id.uom_id']" position="replace" />

            <xpath expr="//th[@name='th_quantity']" position="after">
                <th name="th_uom" />
            </xpath>
            <xpath expr="//td[@name='td_product_quantity']" position="after">
                <td name="td_uom" class="text-end">
                    <span t-field="line.product_uom_id">units</span>
                    <span t-if="line.product_uom_id != line.product_id.uom_id" class="text-muted small">
                        <t t-set="quantity_in_product_uom" t-value="line.product_uom_id._compute_quantity(line.product_uom_qty, line.product_id.uom_id)"/>
                        <br/><span t-esc="quantity_in_product_uom" t-options="{'widget': 'float', 'decimal_precision': 'Product Unit'}"/> <span t-field="line.product_id.uom_id"/>
                    </span>
                </td>
            </xpath>

            <xpath expr="//t[@t-set='section_name_colspan']" position="after">
                <t t-set="section_name_colspan" t-value="section_name_colspan+1" />
            </xpath>




        </template>

    </data>
</odoo>
